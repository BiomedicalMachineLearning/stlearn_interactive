
{% extends 'base.html' %}

{% block content %}

<div class="card">
   <div class="card-header card-header-primary">
		<h4 class="card-title">Uploading files</h4>
   </div>
   <div class="card-body">
		<div class="frame">
	<form action = "http://localhost:5000/uploader" method = "POST" enctype = "multipart/form-data" class = "center">
		<div class="title">
			<h1>Open Visium data</h1>
		</div>

		<div class="dropzone">
			<input type="file" webkitdirectory mozdirectory name = "file" class="upload-input" id="customFile" />
		</div>

		<button type="submit" class="btn" name="uploadbutton" onclick="$('#loading').show();">Upload folder</button>

	</form>
	<div id="loading" style="display:none;"><img src="{{ url_for('static', filename='img/loading_gif.gif') }}" alt=""/></div>
</div>


   </div>
   <div class="card-footer">


	{% with messages = get_flashed_messages() %}
	  {% if messages %}
	    <ul class=flashes>
	    {% for message in messages %}
	      <li>{{ message }}</li>
	    {% endfor %}
	    </ul>
	  {% endif %}
	{% endwith %}
	   </div>
</div>

{% endblock %}


{% block status %}

	{% for key, value in step_log.items() %}
		{% if 'preprocessed_params' != key %}
			{% if value[0] %}
				<li class="list-group-item"><span class="badge badge-pill badge-success">Success</span> {{ value[1] }} </li>
			{% else %}
				<li class="list-group-item"><span class="badge badge-pill badge-danger">None</span> {{ value[1] }} </li>
			{% endif %}
		{% endif %}
	{% endfor %}

	<form action="/reset_session" method="post">
    	<button name="forwardBtn" type="submit">Reset</button>
	</form>

{% endblock %}



{% block javascript %}
<script type="text/javascript">
	$(document).ready(function() {
    $('#file').bind("click",function()
    { if(!$('#customFile').val()){
                alert("empty");
                return false;} });  });
</script>
{% endblock %}
